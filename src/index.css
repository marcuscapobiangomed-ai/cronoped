/* ─── Theme Variables ─── */
:root {
  --bg-page: #F8FAFC;
  --bg-card: #fff;
  --bg-header: #0F172A;
  --bg-input: #fff;
  --bg-hover: #FAFAF9;
  --bg-subtle: #F1F5F9;
  --bg-skeleton-from: #F1F5F9;
  --bg-skeleton-to: #E2E8F0;
  --text-primary: #0F172A;
  --text-secondary: #475569;
  --text-muted: #94A3B8;
  --text-faint: #64748B;
  --border-light: #E2E8F0;
  --border-medium: #CBD5E1;
  --border-focus: #0EA5E9;
}

[data-theme="dark"] {
  --bg-page: #0F172A;
  --bg-card: #1E293B;
  --bg-header: #020617;
  --bg-input: #1E293B;
  --bg-hover: #334155;
  --bg-subtle: #334155;
  --bg-skeleton-from: #1E293B;
  --bg-skeleton-to: #334155;
  --text-primary: #F1F5F9;
  --text-secondary: #CBD5E1;
  --text-muted: #64748B;
  --text-faint: #94A3B8;
  --border-light: #334155;
  --border-medium: #475569;
  --border-focus: #38BDF8;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'Outfit', system-ui, sans-serif; background: var(--bg-page); color: var(--text-primary); }
input, textarea, select { font-family: 'Outfit', system-ui, sans-serif; }

/* ─── Progress bar ─── */
.pfill { height: 100%; border-radius: 99px; transition: width 0.5s cubic-bezier(.34,1.56,.64,1); }

/* ─── Buttons ─── */
.btn { font-family: 'Outfit', system-ui, sans-serif; cursor: pointer; border: none; border-radius: 10px; font-weight: 700; transition: all 0.15s; }
.btn:disabled { opacity: 0.5; cursor: not-allowed; }
.btn-dark { background: #0F172A; color: #fff; padding: 13px 24px; font-size: 15px; }
.btn-dark:hover:not(:disabled) { background: #1E293B; }
.btn-outline { background: transparent; border: 2px solid var(--border-light); color: var(--text-secondary); padding: 11px 20px; font-size: 14px; }
.btn-outline:hover:not(:disabled) { border-color: var(--border-medium); background: var(--bg-page); }

/* ─── Form fields ─── */
.input-field { width: 100%; padding: 12px 16px; border-radius: 10px; font-size: 16px; border: 2px solid var(--border-light); outline: none; transition: border 0.15s; color: var(--text-primary); background: var(--bg-input); }
.input-field:focus { border-color: var(--border-focus); }
.input-field.error { border-color: #EF4444; }

/* ─── Tabs ─── */
.tab { padding: 8px 16px; border-radius: 8px; font-size: 13px; font-weight: 600; cursor: pointer; border: none; background: transparent; color: var(--text-muted); transition: all 0.12s; }
.tab.active { background: var(--bg-header); color: #fff; }

/* ─── Matéria card ─── */
.materia-card { border-radius: 14px; border: 2px solid var(--border-light); padding: 18px; cursor: pointer; transition: all 0.15s; background: var(--bg-card); text-align: left; }
.materia-card:hover:not(.locked) { border-color: var(--border-medium); transform: translateY(-1px); box-shadow: 0 4px 16px rgba(0,0,0,0.06); }
.materia-card.selected { border-color: var(--mc); box-shadow: 0 0 0 1px var(--mc); }
.materia-card.locked { opacity: 0.55; cursor: default; }

/* ─── Skeleton loader ─── */
.skeleton { border-radius: 8px; background: linear-gradient(90deg, var(--bg-skeleton-from) 25%, var(--bg-skeleton-to) 50%, var(--bg-skeleton-from) 75%); background-size: 200% 100%; animation: shimmer 1.4s infinite; }
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

/* ─── Week ─── */
.week-head { display: flex; align-items: center; gap: 14px; padding: 16px 20px; cursor: pointer; user-select: none; background: var(--bg-card); transition: background 0.1s; }
.week-head:hover { background: var(--bg-hover); }
.today-week { border: 2px solid #F59E0B !important; }

/* ─── Activity card ─── */
.activity-card { border-radius: 10px; border: 1.5px solid; padding: 10px 11px; transition: transform 0.12s, box-shadow 0.12s, opacity 0.15s; margin-bottom: 4px; cursor: pointer; }
.activity-card:not(.feriado):hover { transform: translateY(-2px); box-shadow: 0 4px 14px rgba(0,0,0,0.08); }
.activity-card.done { opacity: 0.38; }
.activity-card.done .card-title { text-decoration: line-through; }
.activity-card.feriado { cursor: default; }
.activity-card.today-card { box-shadow: 0 0 0 2px #F59E0B, 0 4px 14px rgba(245,158,11,0.25); }

/* ─── Check dot ─── */
.check-dot { width: 15px; height: 15px; border-radius: 50%; border: 1.5px solid; display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: all 0.18s; cursor: pointer; }

/* ─── Time pill ─── */
.time-pill { display: inline-flex; align-items: center; padding: 2px 7px; border-radius: 99px; font-size: 11px; font-weight: 600; }

/* ─── Turno ─── */
.turno-section { margin-bottom: 10px; }
.turno-divider { font-size: 10px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.09em; color: #A8A29E; margin-bottom: 5px; padding-left: 2px; }

/* ─── Scroll ─── */
.scroll-x { overflow-x: auto; padding: 0 20px 16px; }
.scroll-x::-webkit-scrollbar { height: 4px; }
.scroll-x::-webkit-scrollbar-track { background: transparent; }
.scroll-x::-webkit-scrollbar-thumb { background: #D6D3D1; border-radius: 99px; }

/* ─── Header stats ─── */
.hstats { display: flex; align-items: center; gap: 16px; }

/* ─── Safe area (iPhone notch / home bar) ─── */
body { padding-bottom: env(safe-area-inset-bottom); }
.schedule-header, .dash-header { padding-top: max(14px, env(safe-area-inset-top)) !important; }

/* ─── Touch & global mobile ─── */
button, .activity-card, .materia-card, .week-head { -webkit-tap-highlight-color: transparent; }
button { touch-action: manipulation; }

/* ─── Grupo selector ─── */
.grupo-selector { display: flex; align-items: center; gap: 6px; margin-top: 10px; }
.grupo-selector::-webkit-scrollbar { display: none; }

/* Tutorial glow no grupo selector */
.grupo-tutorial-glow {
  position: relative; z-index: 102;
  border-radius: 10px; padding: 6px 8px; margin: 4px -8px 0;
  animation: pulse-glow 1.5s ease-in-out infinite;
}
@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 0 3px #22C55E, 0 0 16px rgba(34,197,94,0.4); }
  50%      { box-shadow: 0 0 0 5px #22C55E, 0 0 28px rgba(34,197,94,0.6); }
}

/* ─── Mobile ─── */
@media (max-width: 640px) {
  .day-pills-row { display: none !important; }
  .day-grid { flex-direction: column !important; min-width: unset !important; }
  .day-col { min-width: unset !important; }
  .week-head { gap: 10px; padding: 12px 14px; }

  /* Header compacto */
  .schedule-header { padding: 10px 14px !important; padding-top: max(10px, env(safe-area-inset-top)) !important; }
  .hstats { gap: 8px !important; }
  .hstats > div:not(:last-child) { display: none; }
  .hstats > div:last-child > div:first-child { font-size: 16px !important; }
  .hstats > div:last-child > div:last-child  { font-size: 9px !important; }

  /* Grupo selector: scroll horizontal, sem quebra */
  .grupo-selector { overflow-x: auto; -webkit-overflow-scrolling: touch; flex-wrap: nowrap !important; padding-bottom: 4px; margin-top: 8px !important; scrollbar-width: none; }

  /* Week head compacto */
  .week-num { width: 30px !important; height: 30px !important; font-size: 12px !important; }
  .week-title { font-size: 13px !important; }
  .week-dates { font-size: 11px !important; }

  /* Matéria cards */
  .materia-card { padding: 14px !important; }

  /* Dashboard header */
  .dash-header { padding: 12px 16px !important; }

  /* Auth screen box */
  .auth-box { padding: 24px 18px !important; border-radius: 16px !important; }

  /* Scroll area */
  .scroll-x { padding: 0 14px 14px; }

  /* Dashboard header: compact */
  .user-cpf { display: none !important; }
  .dash-title { font-size: 13px !important; }
  .dash-subtitle { font-size: 10px !important; }

  /* Schedule header: prevent overflow */
  .header-right { flex-wrap: wrap !important; gap: 6px !important; justify-content: flex-end !important; }
  .restore-btn { font-size: 9px !important; padding: 2px 7px !important; }

  /* Touch targets: edit/delete buttons */
  .edit-actions button { min-width: 30px !important; min-height: 30px !important; font-size: 13px !important; }

  /* Modals: compact padding */
  .modal-body { padding: 22px 18px !important; }

  /* Activity modal: prevent vertical overflow */
  .modal-form { max-height: calc(100vh - 32px) !important; max-height: calc(100dvh - 32px) !important; overflow-y: auto !important; }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50%       { opacity: 0.4; }
}
